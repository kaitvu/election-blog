"0","# week 3 state sept polling model prediction"
"0","w3_24 <- d_pollav_state |>"
"0","  filter(month(poll_date) == 9, "
"0","         party == ""DEM"", "
"0","         year == 2024) |>"
"0","  select(state, weeks_left, poll_date, poll_support) |>"
"0","  group_by(state) |>"
"0","  summarize(sept_poll = round(weighted.mean(poll_support, weeks_left, na.rm = TRUE),2))"
"0",""
"0","w3_pred <- predict(w3_reg, w3_24, interval = ""prediction"")"
"0",""
"0","w3_table <- bind_cols(w3_24,"
"0","  as.data.frame(w3_pred) |> rename_with(~paste0(""D_"", .))) |>"
"0","  mutate(D_fit = round(D_fit, 2), "
"0","         D_lwr = round(D_lwr, 2), "
"0","         D_upr = round(D_upr, 2), "
"0","         winner = if_else(D_fit>50, ""Harris"", ""Trump"")) |>"
"0","  select(-sept_poll) |>"
"0","  filter(state %in% c(""Arizona"", ""Florida"", ""Georgia"", ""Michigan"", ""Minnesota"", ""Nevada"", ""New Hampshire"", ""New Mexico"", ""North Carolina"", ""Pennsylvania"", ""Texas"", ""Virginia"", ""Wisconsin""))"
"0",""
"0","# table 3: week 3 state sept polling model prediction"
"0","knitr::kable(w3_table, "
"0","             col.names = c(""State"", ""Prediction"", ""Lower Bound"", ""Upper Bound"", ""Winner"")) |>"
"0","  kableExtra::kable_styling(full_width = FALSE) |>"
"0","  kableExtra::row_spec(row = which(w3_table$winner == ""Harris""), background = ""#D3E5FF"") |>"
"0","  kableExtra::row_spec(row = which(w3_table$winner == ""Trump""), background = ""#FFD1D1"")"
